;/*FB_PKG_DELIM*/

__d("useCometCreateComposerStateFromCommentData_comment.graphql",[],(function(a,b,c,d,e,f){"use strict";a=function(){var a={alias:null,args:null,kind:"ScalarField",name:"id",storageKey:null},b={alias:null,args:null,kind:"ScalarField",name:"__typename",storageKey:null};return{argumentDefinitions:[],kind:"Fragment",metadata:null,name:"useCometCreateComposerStateFromCommentData_comment",selections:[a,{alias:null,args:null,concreteType:"TextWithEntities",kind:"LinkedField",name:"body",plural:!1,selections:[{alias:null,args:null,kind:"ScalarField",name:"text",storageKey:null},{alias:null,args:null,concreteType:"EntityAtRange",kind:"LinkedField",name:"ranges",plural:!0,selections:[b,{alias:null,args:null,concreteType:null,kind:"LinkedField",name:"entity",plural:!1,selections:[b,{kind:"InlineFragment",selections:[a],type:"Node",abstractKey:"__isNode"}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"entity_is_weak_reference",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"length",storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"offset",storageKey:null}],storageKey:null}],storageKey:null},{alias:null,args:null,concreteType:"StoryAttachment",kind:"LinkedField",name:"attachments",plural:!0,selections:[{alias:null,args:null,kind:"ScalarField",name:"style_list",storageKey:null}],storageKey:null},{alias:null,args:null,kind:"ScalarField",name:"is_markdown_enabled",storageKey:null},{args:null,kind:"FragmentSpread",name:"CometFeedStoryUFICommentAttachments_comment"}],type:"Comment",abstractKey:null}}();e.exports=a}),null);
__d("setFocusOnCometUFIComposerInputState",["FBLogger","Lexical"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.editor;b!=null?b.update(function(){var a=d("Lexical").$getRoot();a.getChildrenSize()!==0&&a.selectEnd()}):c("FBLogger")("UFILexicalComposer").warn("setFocusOnCometUFIComposerInputStateForLexical being used on an editor that does not support Lexical");return a}g["default"]=a}),98);
__d("mlcFocusSubscription",["Lexical","LexicalUtils"],(function(a,b,c,d,e,f,g){"use strict";function a(a){return{initialValueFn:function(){return a.getRootElement()===document.activeElement},subscribe:function(b){var c;return d("LexicalUtils").mergeRegister(a.registerCommand((c=d("Lexical")).FOCUS_COMMAND,function(){b(!0);return!1},c.COMMAND_PRIORITY_LOW),a.registerCommand(c.BLUR_COMMAND,function(){b(!1);return!1},c.COMMAND_PRIORITY_LOW))}}}g["default"]=a}),98);
__d("createCometUFICommentEditComposerLexicalPlugin",["fbt","CometLink.react","CometRow.react","CometRowItem.react","CometUFIComposerPreviewArea.react","Lexical","TetraText.react","mlcFocusSubscription","react","useCometLexicalSubscription"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react"));b=i;var k=b.useCallback,l=b.useEffect,m=b.useMemo;function n(a){return a.attachment&&a.attachment.__type==="ExistingAttachment"?a.attachment:null}function o(a){var b=a.allowCancelEdit,e=a.onFinishEdit;a=a.pluginProps;var f=a.composerState,g=a.editor,i=a.execCommand,o=a.setComposerState;a=n(f);f=m(function(){return c("mlcFocusSubscription")(g)},[g]);f=c("useCometLexicalSubscription")(f);var p=k(function(){i({__type:"BeforeFinishEdit"}),e()},[i,e]),q=k(function(){o(function(){return{attachment:null}})},[o]);l(function(){g.focus()},[g]);l(function(){return g.registerCommand(d("Lexical").KEY_ESCAPE_COMMAND,function(a){a=a;a.preventDefault();a.stopPropagation();b&&p();return!0},d("Lexical").COMMAND_PRIORITY_LOW)},[g,e,p,b]);return j.jsxs("div",{className:"xh8yej3",children:[a?j.jsx(c("CometUFIComposerPreviewArea.react"),{label:h._("__JHASH__HSFH2uC6RvQ__JHASH__"),onRemove:q,removeAnnouncement:h._("__JHASH__Pf-W96A21oP__JHASH__"),children:j.jsx("div",{className:"x1rg5ohu xvijh9v xhhsvwb x1ty9z65 xgzva0m xh8yej3",children:a.component})}):null,b&&j.jsx(c("CometRow.react"),{paddingHorizontal:0,paddingVertical:4,children:j.jsx(c("CometRowItem.react"),{children:j.jsx(c("TetraText.react"),{type:"meta4",children:f?h._("__JHASH__AfmVeI4Ncbw__JHASH__",[h._param("cancel",j.jsx(c("CometLink.react"),{color:"highlight",onClick:p,children:h._("__JHASH__MA2e8Vc584v__JHASH__")}))]):j.jsx(c("CometLink.react"),{color:"highlight",onClick:p,children:h._("__JHASH__73E60EqVclY__JHASH__")})})})})]})}o.displayName=o.name+" [from "+f.id+"]";function a(a){var b=a.allowCancelEdit;a=a.onFinishEdit;return{above:null,action:null,below:o,id:"edit",inside:null,props:{allowCancelEdit:b,onFinishEdit:a}}}g["default"]=a}),98);
__d("useCometCreateComposerEditorStateFromCommentData",["CometFeedStoryUFICommentAttachments.react","FBLogger","Lexical","UnicodeUtils","cometLexicalTypeToNode","cometUFILexicalCreateEditor","react"],(function(a,b,c,d,e,f,g){"use strict";var h,i,j=h||d("react");function k(a,b){return{__type:"ExistingAttachment",component:j.jsx(c("CometFeedStoryUFICommentAttachments.react"),{actorID:b.actorID,comment:a,feedbackSource:b.feedbackSource,storyRenderLocation:b.storyRenderLocation})}}function l(a){c("FBLogger")("UFILexicalComposer").warn("The user tried to edit a comment with an attachment in the %s style but no code exists to convert that back into an attachment on UFI2ComposerState",a);return null}function m(a,b){var c=a.attachments&&a.attachments[0];if(!c||!c.style_list)return null;for(var d=c.style_list,e=Array.isArray(d),f=0,d=e?d:d[typeof Symbol==="function"?Symbol.iterator:"@@iterator"]();;){var g;if(e){if(f>=d.length)break;g=d[f++]}else{f=d.next();if(f.done)break;g=f.value}g=g;switch(g){case"sticker":case"animated_image_autoplay":case"animated_image_share":case"photo":case"video":case"video_autoplay":case"file_upload":case"image_share":case"facts_in_comments":case"community_award_attachment":return k(a,b);case"COMMENT_MESSAGE_INFO":case"event":case"group":case"music_aggregation":case"share":case"video_share":return null}}return l(c.style_list[0])}function a(a,b){var e,f=(e=(e=b.body)==null?void 0:e.text)!=null?e:"",g=(e=b.body)==null?void 0:e.ranges;e=m(b,{actorID:a.actorID,feedbackSource:a.feedbackSource,storyRenderLocation:a.storyRenderLocation});var h=c("cometUFILexicalCreateEditor")();h.update(function(){var a=d("Lexical").$getRoot(),c=b.body;if(c){var e=0;c=a.getFirstChild();var h=d("Lexical").$createParagraphNode();c===null?a.append(h):c.replace(h);if(g){c=n(g);c.forEach(function(a){var b,c,g;b=(b=a.offset)!=null?b:0;if(b>e){var j=b-e;j=(i||(i=d("UnicodeUtils"))).substr(f,e,j);o(h,j)}j=(j=(j=a.entity)==null?void 0:j.__typename)!=null?j:"Actor";c=(c=a.length)!=null?c:0;var k=(i||(i=d("UnicodeUtils"))).substr(f,b,c);a=d("cometLexicalTypeToNode").$cometLexicalTypeToNode({id:(g=(g=a.entity)==null?void 0:g.id)!=null?g:"0",isWeak:(g=a.entity_is_weak_reference)!=null?g:!1,text:k,type:j});a!==null&&(h.append(a),a.select());e=b+c})}if(e!==(i||(i=d("UnicodeUtils"))).strlen(f)){c=(i||(i=d("UnicodeUtils"))).substr(f,e);o(h,c);a.getChildrenSize()!==0&&a.selectEnd()}}});return{attachment:e,commentAssociatedWithReply:null,commentID:b.id,editor:h,feedbackID:a.feedbackId,formattingStyle:b.is_markdown_enabled===!0?"MARKDOWN":"PLAIN_TEXT",inputDecorators:[],inputState:{__type:"lexical-editor-state-based"},isLocked:!1}}function n(a){return Array.from(a).sort(function(a,b){return((a=a.offset)!=null?a:0)-((a=b.offset)!=null?a:0)})}function o(a,b){var c=b.split(/\r?\n/);if(c.length===1){b=d("Lexical").$createTextNode(b);a.append(b)}else{b=c.length;for(var e=0;e<b;e++){var f=c[e];f!==""&&a.append(d("Lexical").$createTextNode(f));e!==b-1&&a.append(d("Lexical").$createLineBreakNode())}}}g["default"]=a}),98);
__d("useCometCreateComposerStateFromCommentData",["CometRelay","unrecoverableViolation","useCometCreateComposerEditorStateFromCommentData","useCometCreateComposerStateFromCommentData_comment.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){a=d("CometRelay").useFragment(h!==void 0?h:h=b("useCometCreateComposerStateFromCommentData_comment.graphql"),a);if(a==null)throw c("unrecoverableViolation")("Cannot create composer state without comment data on getCometCreateComposerStateFromCommentData","comet_feed");return c("useCometCreateComposerEditorStateFromCommentData")(e,a)}g["default"]=a}),98);/*FB_PKG_DELIM*/
__d("reformCometComposerTextWithEntitiesForLexical_textWithEntities.graphql",[],(function(a,b,c,d,e,f){"use strict";a={kind:"InlineDataFragment",name:"reformCometComposerTextWithEntitiesForLexical_textWithEntities"};e.exports=a}),null);
__d("cometLexicalTypeToNode",["CometLexicalGenericEntityNode","Lexical"],(function(a,b,c,d,e,f,g){"use strict";function a(a){var b=a.id,c=a.text;a=a.type;switch(a){case"Actor":case"User":case"Page":case"Event":case"Hashtag":case"PageWhatsAppNumber":case"Group":case"GroupRule":case"GroupCustomSlashCommand":return d("CometLexicalGenericEntityNode").$createCometLexicalGenericEntityNode({id:b,text:c,type:a});default:return d("Lexical").$createTextNode(c)}}g.$cometLexicalTypeToNode=a}),98);
__d("reformCometComposerLexicalEditorForLexical",["Lexical","UnicodeUtils","cometComposerLexicalCreateEditor","cometLexicalTypeToNode"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,b){var e=c("cometComposerLexicalCreateEditor")();e.update(function(){var c=d("Lexical").$getRoot(),e=d("Lexical").$createParagraphNode();c.append(e);i(c,e,a,b)});return e}function i(a,b,c,e){var f=0;e.forEach(function(a){var e;e=(e=a.offset)!=null?e:0;if(e>f){var g=e-f;g=(h||(h=d("UnicodeUtils"))).substr(c,f,g);j(b,g)}g=(g=a.length)!=null?g:0;var i=(h||(h=d("UnicodeUtils"))).substr(c,e,g);i=d("cometLexicalTypeToNode").$cometLexicalTypeToNode({id:a.entity.id,isWeak:a.isWeak,text:i,type:a.entity.type});i!==null&&(b.append(i),i.select());f=e+g});if(f!==(h||(h=d("UnicodeUtils"))).strlen(c)){e=(h||(h=d("UnicodeUtils"))).substr(c,f);j(b,e);a.getChildrenSize()!==0&&a.selectEnd()}}function j(a,b){var c=b.split(/\r?\n/);if(c.length===1){b=d("Lexical").$createTextNode(b);a.append(b);return}b=c.length;for(var e=0;e<b;e++){var f=c[e];f!==""&&a.append(d("Lexical").$createTextNode(f));e!==b-1&&a.append(d("Lexical").$createLineBreakNode())}}g["default"]=a}),98);
__d("reformCometComposerTextWithEntitiesForLexical",["CometRelay","reformCometComposerLexicalEditorForLexical","reformCometComposerTextWithEntitiesForLexical_textWithEntities.graphql"],(function(a,b,c,d,e,f,g){"use strict";var h;function a(a,e){a=d("CometRelay").readInlineData(h!==void 0?h:h=b("reformCometComposerTextWithEntitiesForLexical_textWithEntities.graphql"),a);var f=a.ranges;a=a.text;if(a==null)return e;var g=[];f!=null&&(f.forEach(function(a){if(a!=null&&a.offset!=null&&a.length!=null&&a.entity_is_weak_reference!=null&&a.entity!=null&&a.entity.id!=null&&a.entity.__typename!=null){var b=a.entity.__typename;g.push({entity:{id:a.entity.id,type:b},isWeak:a.entity_is_weak_reference,length:a.length,offset:a.offset})}}),g.sort(function(a,b){return a.offset-b.offset}));f=c("reformCometComposerLexicalEditorForLexical")(a,g);return babelHelpers["extends"]({lexicalEditor:f},e)}g["default"]=a}),98);
__d("CometMediaViewerComposerLexicalPlugins.react",["cr:2590","createComposerDeferredPlugin","react","requireDeferred"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||d("react"),j=c("createComposerDeferredPlugin")(c("requireDeferred")("CometComposerIsDirtyPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react")),k=c("createComposerDeferredPlugin")(c("requireDeferred")("CometComposerEmojiPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react")),l=c("createComposerDeferredPlugin")(c("requireDeferred")("CometComposerLinksPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react")),m=c("createComposerDeferredPlugin")(c("requireDeferred")("CometComposerMisinformationLinkDetectorPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react")),n=c("createComposerDeferredPlugin")(c("requireDeferred")("CometMediaViewerComposerMentionsPluginForLexical.react").__setRef("CometMediaViewerComposerLexicalPlugins.react"));function a(a){var c=a.alwaysShrinkText;a=a.photoID;return i.jsxs(i.Fragment,{children:[i.jsx(l,{},"linkPlugin"),i.jsx(m,{composerType:"feed"},"misinformationLinkDetectorPlugin"),i.jsx(n,{photoID:a},"mentionsPlugin"),i.jsx(b("cr:2590"),{},"hashtagsPlugin"),i.jsx(k,{alwaysShrinkText:c},"emojiPlugin"),i.jsx(j,{})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMediaViewerComposerLexicalEditor.react",["fbt","CometComposerEditorForLexical.react","CometMediaViewerComposerLexicalPlugins.react","FeedComposerCometTextStyleContext","react"],(function(a,b,c,d,e,f,g,h){"use strict";var i,j=i||(i=d("react")),k=i.useMemo;function a(a){a=a.photoID;var b=k(function(){return{color:"primary-text",fontSize:15}},[]);return j.jsxs(c("FeedComposerCometTextStyleContext").Provider,{value:b,children:[j.jsx(c("CometComposerEditorForLexical.react"),{autoFocus:!0,placeholderText:h._("__JHASH__cr_C5nMlTqA__JHASH__").toString(),surface:"FeedComposerCometStatusArea",textAlignment:void 0}),j.jsx(c("CometMediaViewerComposerLexicalPlugins.react"),{alwaysShrinkText:!1,photoID:a})]})}a.displayName=a.name+" [from "+f.id+"]";g["default"]=a}),98);
__d("CometMediaViewerComposerMentionsPluginForLexical.react",["CometMentionsForLexical.react","CometMentionsLayoutStrategy.react","FeedComposerCometMentionsViewItemResolver.react","cometMentionsLexicalCreateNodeStrategy","react","useCometMediaViewerComposerMentionsStrategyResolverConfig","useCometTypeaheadViewListStrategy","withComposerViewStatePart"],(function(a,b,c,d,e,f,g){"use strict";var h,i=h||(h=d("react")),j=h.useCallback;function a(a){var b=a.editor;a=babelHelpers.objectWithoutPropertiesLoose(a,["editor"]);return b==null?null:i.jsx(k,babelHelpers["extends"]({},a,{editor:b}))}a.displayName=a.name+" [from "+f.id+"]";function k(a){var b=a.editor;a=a.photoID;a=c("useCometMediaViewerComposerMentionsStrategyResolverConfig")(a);var d=j(function(a){switch(a.rawData.type){case"MENTION_TYPE_SELECTION":return{shouldMentionSelectedEntry:!1};case"MENTION_TYPE_RESET":return{shouldMentionSelectedEntry:!1};default:return{shouldMentionSelectedEntry:!0}}},[]),e=c("useCometTypeaheadViewListStrategy")({viewItemStrategyRenderer:c("FeedComposerCometMentionsViewItemResolver.react")});return i.jsx(c("CometMentionsForLexical.react"),{createNodeStrategy:c("cometMentionsLexicalCreateNodeStrategy"),dataSourceResolverConfig:a,editor:b,layoutStrategyRenderer:c("CometMentionsLayoutStrategy.react"),mentionsHandlerForSelectedEntry:d,viewStrategyRenderer:e})}k.displayName=k.name+" [from "+f.id+"]";b=c("withComposerViewStatePart")(a,function(a){return{editor:a.lexicalEditor}});g["default"]=b}),98);
__d("CommerceShoppableContentLandingVpvFalcoEvent",["FalcoLoggerInternal","getFalcoLogPolicy_DO_NOT_USE"],(function(a,b,c,d,e,f,g){"use strict";a=c("getFalcoLogPolicy_DO_NOT_USE")("3135");b=d("FalcoLoggerInternal").create("commerce_shoppable_content_landing_vpv",a);e=b;g["default"]=e}),98);